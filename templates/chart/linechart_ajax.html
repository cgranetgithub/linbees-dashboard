{% load staticfiles %}
<script type="text/javascript">
    // TODO: should be done only once to avoid consuming time
    google.load("visualization", "1", {packages:["corechart"]});
    $(document).ready(function() {
        console.log("{% url data_url startdate=startdate enddate=enddate %} for '{{ divname }}'");
        $.ajax({
            url:"{% url data_url startdate=startdate enddate=enddate %}", 
            success: function( data ) {
                console.log("Ok");
                console.log(document.getElementById("{{ divname }}"));
                try {
                var data = google.visualization.arrayToDataTable(data['data']);
                var chart = new google.visualization.LineChart(document.getElementById("{{ divname }}"));
                chart.draw(data, data['options']);
                } catch(err) {
                    console.log("an error has occured : " + err);
                }
            }
        });
    });
</script>
<div id="{{ divname }}" class="chart">
    <img src="{% static 'dashboard/ajax-loader.gif' %}" style='display: block; margin: auto auto;' />
</div>
